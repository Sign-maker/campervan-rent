import{j as t,a as s,L as f,B as d}from"./index-BuLSGwLY.js";import{G as j,u as w,C as _}from"./CarList-iDb4oBeX.js";import{B as b}from"./Button-DaKIQAVw.js";const v="_contentSection_sih0d_1",C="_catalog_sih0d_5",L="_btnWrapper_sih0d_10",r={contentSection:v,catalog:C,btnWrapper:L},y="_wrapper_bobfx_1",N={wrapper:y};function B(e){return j({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4.801 3.57A1.75 1.75 0 0 1 6.414 2.5h11.174c.702 0 1.337.42 1.611 1.067l3.741 8.828c.04.092.06.192.06.293v7.562A1.75 1.75 0 0 1 21.25 22H2.75A1.75 1.75 0 0 1 1 20.25v-7.5c0-.1.02-.199.059-.291L4.8 3.571ZM6.414 4a.25.25 0 0 0-.23.153L2.88 12H8a.75.75 0 0 1 .648.372L10.18 15h3.638l1.533-2.628a.75.75 0 0 1 .64-.372l5.13-.051-3.304-7.797a.25.25 0 0 0-.23-.152ZM21.5 13.445l-5.067.05-1.535 2.633a.75.75 0 0 1-.648.372h-4.5a.75.75 0 0 1-.648-.372L7.57 13.5H2.5v6.75c0 .138.112.25.25.25h18.5a.25.25 0 0 0 .25-.25Z"},child:[]}]})(e)}const E=()=>t.jsxs("div",{className:N.wrapper,children:[t.jsx(B,{size:"50"}),t.jsx("p",{children:"No data yet"})]}),G=()=>{const{cars:e,totalPages:n,fetchCars:c,resetCars:l,isLoading:i}=w(),[p,h]=s.useState(!1),[a,g]=s.useState(1);s.useEffect(()=>{const o=new AbortController,u=o.signal;return(async()=>{try{await c({params:{page:a},signal:u}),a>1&&window.scrollBy({top:384,behavior:"smooth"}),d.success("New campers loaded")}catch(x){d.error(`Oops.. something went wrong! ${x}`)}})(),()=>{o.abort()}},[c,a]),s.useEffect(()=>{h(a<n)},[a,n]),s.useEffect(()=>()=>{l()},[l]);const m=()=>{g(o=>o+1)};return t.jsx("section",{className:r.contentSection,children:t.jsx("div",{className:"container",children:t.jsxs("div",{className:r.catalog,children:[t.jsx("h2",{className:"visually-hidden",children:"Campers catalog"}),e.length>0&&t.jsx(_,{}),i&&t.jsx(f,{}),!e.length&&t.jsx(E,{}),p&&t.jsx("div",{className:r.btnWrapper,children:t.jsx(b,{styleType:"loadMoreButton",loading:i,onClick:m,children:"Load more"})})]})})})};export{G as default};
