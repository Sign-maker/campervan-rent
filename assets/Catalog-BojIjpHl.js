import{u as f,a as i,r as t,c as p,f as h,j as u}from"./index-CUOnTft6.js";const x=s=>s.cars.campers,b=s=>s.cars.totalPages,m=s=>s.cars.isLoading,L=()=>{const s=f(),e=i(b),o=i(x),c=i(m),n=t.useCallback(()=>s(p.actions.resetCars()),[s]),l=t.useCallback(a=>s(h(a)).unwrap(),[s]);return{cars:o,totalPages:e,isLoading:c,fetchCars:l,resetCars:n}},E=()=>{const{totalPages:s,fetchCars:e,resetCars:o,isLoading:c}=L(),[n,l]=t.useState(!1),[a,C]=t.useState(1);t.useEffect(()=>{const r=new AbortController,g=r.signal;return e({params:{page:a},signal:g}),()=>{r.abort()}},[e,a]),t.useEffect(()=>{l(a<s)},[a,s]),t.useEffect(()=>()=>{o()},[o]);const d=()=>{C(r=>r+1)};return u.jsxs("div",{children:["Catalog",c&&u.jsx("p",{children:"...Loading"}),n&&u.jsx("button",{onClick:d,children:"load more"})]})};export{E as default};
